
@model CreateClientDTO


@{
    ViewData["Title"] = "إضافة عميل";

}

<!--





DepartmentId


-->
<div class="row">
    
    
<form class="form-control" asp-area="" asp-action="Register" asp-controller="Account" method="post">
    <input asp-for="ClientId" type="hidden" />

  <div class="form-group">
    <label asp-for="ClientName" ></label>
    <input type="text" class="form-control" id="firstName" asp-for="ClientName" aria-describedby="firstName" placeholder="Enter Firdt Name">
     <span asp-validation-for="ClientName" class="text-danger"></span>  
  </div>
   <div class="form-group">
        <label for="exampleInputEmail1" asp-for="PhoneNumber" ></label>
        <input type="number" class="form-control" id="phonenumber" asp-for="PhoneNumber" aria-describedby="phoneNumber" placeholder="ادخل رقم الجوال">
        <span asp-validation-for="PhoneNumber" class="text-danger"></span>  
  </div>



  <div class="form-group">
      <label asp-for="DepartmentId"></label>
     <select class="form-select" id="selectDepartment" asp-for="DepartmentId" asp-items="ViewBag.departments">
          <option value="-1" selected disabled >اختار القسم المناسب</option>
     </select>
  </div>

<div class="form-group">
      <label asp-for="BaseUserId"></label>
     <select id="selectUsers" class="form-select" asp-for="BaseUserId" >
          <option value="-1" disabled >اختار الموظف</option>
     </select>
  </div>

<div class="pt-3">
  <button type="submit" class="btn btn-primary">Submit</button>
</div>
</form>

</div>

@section Scripts{

    <script>
        $(document).ready(function () {
            $(document).on("change", "#selectDepartment", function () {
                var subCat = this;
                $.ajax({
                    url: "GetUsersByDepartmentId?departmentId=" + $(subCat).val(),
                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    datatype: JSON,
                    success: function (result) {
                        debugger;
                        var users = "";
                        $(result).each(function () {
                            users = users + '<option value="' + this.userId + '">' + this.name + '</option>'
                        });
                        var subCateList = $("#selectUsers");
                        subCateList.empty();
                        subCateList.append(users);
                    },
                    error: function (data) {
                        return "Error";
                    }
                });
            });
        });
</script>

}