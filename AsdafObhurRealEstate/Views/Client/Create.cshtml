
@model CreateClientDTO

@{
    var i = 0;
    int newFileId = 0;

}


<div class="row">

    <div class="form-two-col">
        <div class="form-col custom-form-btn-container">
            <a asp-area="" asp-action="Index" asp-controller="Client"  class="custom-form-btn custom-form-input btn btn-primary m-0" type="button">قائمة العملاء لدى</a>
        </div>
    </div>
</div>
   

<div class="container" >

    <form class="row custom-form" asp-area="" asp-action="Create" asp-controller="Client" method="post" enctype="multipart/form-data">
        <input asp-for="ClientId" type="hidden" />

        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-10">
            <div class="col-xs-12 col-sm-12 col-md-5 d-flex flex-column m-2">
                <label class="fs-5" asp-for="ClientName">اسم العميل</label>
            <input class="custom-form-input" type="text" placeholder="ادخل الاسم" id="clientName" asp-for="ClientName" aria-describedby="clientName">
            <span asp-validation-for="ClientName" class="text-danger"></span>
        </div>

        <div class="col-xs-12 col-sm-12 col-md-5 d-flex flex-column m-2">
            <label class="fs-5" asp-for="Address">عنوان بالتفصيل</label>
            <input class="custom-form-input" type="text" id="Address" asp-for="Address" aria-describedby="Address" placeholder="عنوان بالتفصيل">
            <span asp-validation-for="Address" class="text-danger"></span>
        </div>

       
    </div>
        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-10">

            <div class="col-xs-12 col-sm-12 col-md-5 d-flex flex-column m-2">
                    <label class="fs-5" asp-for="CodePhoneNumber">اختر كود الدوله</label>
                    <select id="codePhoneNumber" class="custom-form-input custom-select" asp-for="CodePhoneNumber" asp-items="ViewBag.listPhone">
                        <option value="-1" selected disabled>اختار كود الدوله</option>
                    </select>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-5 d-flex flex-column m-2">
                <label class="fs-5" asp-for="PhoneNumber">رقم الهاتف</label>
                <input class="custom-form-input" type="number" id="phonenumber" asp-for="PhoneNumber" aria-describedby="phoneNumber" placeholder="رقم الهاتف">
                <span asp-validation-for="PhoneNumber" class="text-danger"></span>
            </div>
    </div>

        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-10">

            <div class="col-xs-12 col-sm-12 col-md-5 d-flex flex-column m-2">
                <label class="fs-5" asp-for="CustomerNeeded">احتياج العميل </label>
                <input class="custom-form-input" type="text" id="CustomerNeeded" asp-for="CustomerNeeded" aria-describedby="CustomerNeeded" placeholder="احتياج العميل ">
                <span asp-validation-for="CustomerNeeded" class="text-danger"></span>
            </div>

        <div class="col-xs-12 col-sm-12 col-md-5 d-flex flex-column m-2">
                <label class="fs-5" asp-for="DepartmentId">اختر القسم</label>
                <select id="selectDepartment" class="custom-form-input custom-select" asp-for="DepartmentId" asp-items="ViewBag.departments">
                    <option value="-1" selected disabled>اختر القسم المناسب</option>
            </select>
        </div>

            <div class="col-xs-12 col-sm-12 col-md-5 d-flex flex-column m-2">
                <label class="fs-5" asp-for="BaseUserId">اختر الموظف</label>
                <select id="selectUsers" class="custom-form-input custom-select" asp-for="BaseUserId" >
                    <option value="-1" selected disabled>اختر الموظف</option>
            </select>
        </div>
    </div>


        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-10">
            <div class="col-xs-12 col-sm-12 col-md-5 d-flex flex-column m-2">
                <label class="fs-5" asp-for="NotesBeforeWhileCreating">ملاحظات قبل الإنشاء</label>
                <input class="custom-form-input" type="text" id="NotesBeforeWhileCreating" asp-for="NotesBeforeWhileCreating" aria-describedby="NotesBeforeWhileCreating" placeholder="ادخل ملاحظات قبل الإنشاء">
                <span asp-validation-for="NotesBeforeWhileCreating" class="text-danger"></span>
            </div>
        </div>

        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-10">


            <h3 class="mt-5 mb-1"> ملفات اخرى</h3>


            <div class="row card mt-4 mb-4">
                <div class="table-responsive">
                    <table id="table-file" class="table table-bordered table-hover overflow-scroll">
                        <thead>
                            <tr class="text-dark">
                                <th scope="col">#</th>
                                <th scope="col">الملف</th>
                                <th scope="col">وصف الملف</th>
                                <th scope="col">اضافة</th>
                                <th scope="col">مسح</th>
                            </tr>
                        </thead>
                        <tbody id="appendNewFile">
                            
                            @{
                                var row = i;
                            }

                            <tr id="row-@(row+=1)">
                                <th scope="row">@(++i)</th>
                                <td>
                                    <input class="test" id="hasFile-@i" asp-for="NewOtherFiles[newFileId].NewFile" type="file">
                                </td>
                                <td>
                                    <input id="hasDescription-@i" asp-for="NewOtherFiles[newFileId].Description" type="text">
                                </td>
                                <td class="d-flex justify-content-center">
                                    <button id="remove-@i" type="button" class="add-new-otherFile table-add-btn">
                                        <i class="fas fa-plus fs-6"></i>
                                    </button>
                                </td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>




        <div class="row col-12 form-col custom-form-btn-container">
            <button class="custom-form-btn custom-form-input btn btn-primary m-0" type="submit">أدخل</button>
        </div>
    </div>
</form>
</div>


@section Scripts{

    <script>
        $(document).ready(function () {
            $(document).on("change", "#selectDepartment", function () {
                var subCat = this;
                $.ajax({
                    url: "GetUsersByDepartmentId?departmentId=" + $(subCat).val(),
                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    datatype: JSON,
                    success: function (result) {
                        debugger;
                        var users = '<option selected disabled value="0">اختار الموظف</option>';
                        $(result).each(function () {
                            users = users + '<option value="' + this.id + '">' + this.value + '</option>'
                        });
                        var subCateList = $("#selectUsers");
                        subCateList.empty();
                        subCateList.append()
                        subCateList.append(users);
                    },
                    error: function (data) {
                        return "Error";
                    }
                });
            });
        });
</script>


    <script>
        var currentIndex = @(i);
        var nextIndex = @(++i);
        var ids = 1;

    </script>

    <script src="~/customjavascript/clientdetails/plusorminusfile.js"></script>

}